<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Domaine des Coteaux de Loire - Histoire Interactive</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .scene-transition {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .choice-button {
            transition: all 0.3s ease;
        }
        .choice-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-green-50 to-yellow-50 min-h-screen">
    <div id="app" class="max-w-2xl mx-auto p-6">
        <!-- Loading message -->
        <div class="text-center">
            <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-green-600 mx-auto"></div>
            <p class="mt-2 text-gray-600">Chargement de l'histoire...</p>
        </div>
    </div>

    <script>
        // √âtat de l'application
        let currentScene = 'start';
        let discoveries = [];
        
        // Donn√©es des sc√®nes
        const scenes = {
            start: {
                title: "Bienvenue au Domaine des Coteaux de Loire",
                content: "Vous arrivez dans un magnifique domaine viticole au c≈ìur de la vall√©e de la Loire. Les vignes s'√©tendent √† perte de vue, et l'air embaume le raisin m√ªr. Un panneau indique : 'Domaine familial - Sp√©cialit√© Chenin depuis 1892'.",
                image: "üçá",
                choices: [
                    { text: "Entrer par la cave", scene: 'cave' },
                    { text: "Aller voir les vignes", scene: 'vignes' },
                    { text: "Se pr√©senter √† l'accueil", scene: 'accueil' }
                ]
            },
            
            accueil: {
                title: "Rencontre avec Marie, la vigneronne",
                content: "Marie, la propri√©taire du domaine, vous accueille avec un sourire chaleureux. 'Bonjour ! Je suis Marie, troisi√®me g√©n√©ration √† travailler ce terroir. Le chenin, c'est ma passion ! Il exprime ici toute la min√©ralit√© de nos sols de tuffeau.'",
                image: "üë©‚Äçüåæ",
                choices: [
                    { text: "Demander l'histoire du domaine", scene: 'histoire', discovery: "Histoire familiale" },
                    { text: "D√©couvrir le chenin", scene: 'chenin', discovery: "C√©page chenin" },
                    { text: "Visiter les installations", scene: 'cave' }
                ]
            },

            vignes: {
                title: "Dans les vignes avec Pierre, le chef de culture",
                content: "Pierre, un homme passionn√© aux mains tach√©es de terre, vous explique : 'Regardez ces feuilles ! Le chenin aime notre climat frais. Ici, on vendange tard pour avoir cette belle acidit√© qui fait la r√©putation de nos vins.'",
                image: "üçÉ",
                choices: [
                    { text: "Apprendre sur le terroir", scene: 'terroir', discovery: "Terroir de tuffeau" },
                    { text: "Comprendre la vendange", scene: 'vendange', discovery: "Vendange tardive" },
                    { text: "Retourner au domaine", scene: 'accueil' }
                ]
            },

            cave: {
                title: "Les chais avec Thomas, le ma√Ætre de chai",
                content: "Thomas, jeune ≈ìnologue passionn√©, vous guide dans les chais. 'Le chenin, c'est un c√©page noble mais capricieux. Regardez ces cuves : on vinifie en douceur pour pr√©server ses ar√¥mes de fruits blancs et cette min√©ralit√© si particuli√®re.'",
                image: "üç∑",
                choices: [
                    { text: "D√©couvrir la vinification", scene: 'vinification', discovery: "Vinification douce" },
                    { text: "D√©guster le vin", scene: 'degustation' },
                    { text: "Voir les barriques", scene: 'elevage', discovery: "√âlevage en f√ªts" }
                ]
            },

            histoire: {
                title: "L'histoire du domaine",
                content: "Marie vous raconte : 'Mon arri√®re-grand-p√®re a plant√© les premi√®res vignes en 1892. √Ä l'√©poque, le chenin √©tait moins reconnu qu'aujourd'hui. Mais il a cru en ce c√©page et en notre terroir. Aujourd'hui, nous sommes fiers de perp√©tuer cette tradition familiale.'",
                image: "üìö",
                choices: [
                    { text: "D√©couvrir les vignes", scene: 'vignes' },
                    { text: "Visiter la cave", scene: 'cave' },
                    { text: "En savoir plus sur le chenin", scene: 'chenin' }
                ]
            },

            chenin: {
                title: "Le chenin, c√©page noble de Loire",
                content: "Marie explique avec passion : 'Le chenin blanc est extraordinaire ! Il peut donner des vins secs, demi-secs, moelleux ou m√™me effervescents. Ici, on privil√©gie les vins secs qui expriment la min√©ralit√© de notre tuffeau. Une acidit√© remarquable et une capacit√© de garde exceptionnelle !'",
                image: "üçá",
                choices: [
                    { text: "Voir comment on le cultive", scene: 'vignes' },
                    { text: "Comprendre la vinification", scene: 'cave' },
                    { text: "Passer √† la d√©gustation", scene: 'degustation' }
                ]
            },

            terroir: {
                title: "Le terroir de tuffeau",
                content: "Pierre vous fait toucher la terre : 'Sentez cette pierre blanche ? C'est le tuffeau, une roche calcaire tendre. Elle retient l'eau l'√©t√© et draine l'hiver. Les racines de nos chenins plongent profond dans cette roche. C'est elle qui donne cette min√©ralit√© unique √† nos vins.'",
                image: "ü™®",
                choices: [
                    { text: "Voir les techniques de culture", scene: 'vendange' },
                    { text: "Retourner voir Marie", scene: 'accueil' },
                    { text: "Aller en cave", scene: 'cave' }
                ]
            },

            vendange: {
                title: "Les vendanges tardives",
                content: "Pierre explique : 'On vendange fin septembre, parfois d√©but octobre. Plus tard que nos voisins ! Mais c'est le secret : le chenin a besoin de cette maturation lente. Les nuits fra√Æches pr√©servent l'acidit√©, les journ√©es ensoleill√©es concentrent les ar√¥mes.'",
                image: "üß∫",
                choices: [
                    { text: "Comprendre la vinification", scene: 'cave' },
                    { text: "D√©couvrir le terroir", scene: 'terroir' },
                    { text: "Rencontrer Marie", scene: 'accueil' }
                ]
            },

            vinification: {
                title: "La vinification douce",
                content: "Thomas vous montre ses cuves : 'Pas de secret, que de la patience ! Pressurage doux, fermentation lente √† temp√©rature contr√¥l√©e. On respecte le fruit. Voyez ces cuves inox ? Elles pr√©servent la fra√Æcheur. Certaines cuv√©es passent en barriques pour plus de complexit√©.'",
                image: "üè≠",
                choices: [
                    { text: "Voir l'√©levage en barriques", scene: 'elevage' },
                    { text: "Passer √† la d√©gustation", scene: 'degustation' },
                    { text: "Retourner aux vignes", scene: 'vignes' }
                ]
            },

            elevage: {
                title: "L'√©levage en f√ªts",
                content: "Thomas caresse une barrique : 'Nos chenins de garde passent 8 mois en f√ªts de ch√™ne fran√ßais. Pas pour le go√ªt bois√©, mais pour l'oxyg√©nation lente. Le vin gagne en complexit√©, en texture. C'est un mariage d√©licat entre le fruit et le bois.'",
                image: "üõ¢Ô∏è",
                choices: [
                    { text: "Comprendre la vinification", scene: 'vinification' },
                    { text: "Go√ªter le r√©sultat", scene: 'degustation' },
                    { text: "Revoir l'histoire du domaine", scene: 'histoire' }
                ]
            },

            degustation: {
                title: "D√©gustation finale",
                content: `F√©licitations ! Vous avez d√©couvert ${discoveries.length} secrets du domaine. Marie vous propose une d√©gustation de leur chenin : "Sentez ces ar√¥mes de poire et de miel, cette min√©ralit√©... Regardez cette robe dor√©e ! C'est tout notre terroir dans ce verre. Merci de votre visite !"`,
                image: "ü•Ç",
                choices: [
                    { text: "Voir mes d√©couvertes", scene: 'recap' },
                    { text: "Recommencer l'aventure", scene: 'restart' }
                ]
            },

            recap: {
                title: "Vos d√©couvertes au domaine",
                content: "Voici tout ce que vous avez appris lors de votre visite du domaine :",
                image: "üìã",
                choices: [
                    { text: "Recommencer l'aventure", scene: 'restart' },
                    { text: "Retourner √† la d√©gustation", scene: 'degustation' }
                ]
            }
        };

        // Fonctions
        function addDiscovery(discovery) {
            if (!discoveries.includes(discovery)) {
                discoveries.push(discovery);
            }
        }

        function goToScene(sceneName, discovery = null) {
            if (discovery) {
                addDiscovery(discovery);
            }
            
            if (sceneName === 'restart') {
                discoveries = [];
                currentScene = 'start';
            } else {
                currentScene = sceneName;
            }
            
            render();
        }

        function render() {
            const scene = scenes[currentScene];
            if (!scene) {
                console.error('Sc√®ne non trouv√©e:', currentScene);
                return;
            }

            const app = document.getElementById('app');
            
            app.innerHTML = `
                <div class="scene-transition bg-white rounded-lg shadow-lg overflow-hidden">
                    <!-- Header -->
                    <div class="bg-gradient-to-r from-green-600 to-green-700 text-white p-6 text-center">
                        <div class="flex items-center justify-center gap-2 mb-2">
                            <span class="text-2xl">üç∑</span>
                            <h1 class="text-2xl font-bold">Domaine des Coteaux de Loire</h1>
                        </div>
                        <div class="flex items-center justify-center gap-4 text-sm opacity-90">
                            <div class="flex items-center gap-1">
                                <span>üìç</span>
                                <span>Vall√©e de la Loire</span>
                            </div>
                            <div class="flex items-center gap-1">
                                <span>üçá</span>
                                <span>Chenin Blanc</span>
                            </div>
                        </div>
                    </div>

                    <!-- Scene Content -->
                    <div class="p-6">
                        <!-- Scene Header -->
                        <div class="text-center mb-6">
                            <div class="text-6xl mb-3">${scene.image}</div>
                            <h2 class="text-2xl font-bold text-gray-800">${scene.title}</h2>
                        </div>

                        <!-- Scene Text -->
                        <div class="bg-gray-50 rounded-lg p-4 mb-6">
                            <p class="text-gray-700 leading-relaxed">${scene.content}</p>
                        </div>

                        <!-- Discoveries for recap scene -->
                        ${currentScene === 'recap' ? `
                            <div class="mb-6">
                                <h3 class="font-semibold text-gray-800 mb-3">üéØ Vos d√©couvertes :</h3>
                                ${discoveries.length > 0 ? `
                                    <ul class="space-y-2">
                                        ${discoveries.map(discovery => `
                                            <li class="flex items-center gap-2 text-green-700">
                                                <span class="text-green-500 font-bold">‚úì</span>
                                                <span>${discovery}</span>
                                            </li>
                                        `).join('')}
                                    </ul>
                                ` : `
                                    <p class="text-gray-500 italic">Aucune d√©couverte pour cette visite.</p>
                                `}
                            </div>
                        ` : ''}

                        <!-- Choices -->
                        <div class="space-y-3">
                            ${scene.choices.map((choice, index) => `
                                <button 
                                    onclick="goToScene('${choice.scene}'${choice.discovery ? `, '${choice.discovery}'` : ''})"
                                    class="choice-button w-full text-left p-4 bg-green-100 hover:bg-green-200 rounded-lg border border-green-200 text-gray-800 font-medium"
                                >
                                    ${choice.discovery ? 'üîç ' : ''}${choice.text}
                                </button>
                            `).join('')}
                        </div>
                    </div>

                    <!-- Progress Bar -->
                    ${discoveries.length > 0 ? `
                        <div class="bg-gray-50 border-t p-4">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="text-green-600">üë•</span>
                                <span class="text-sm font-medium text-gray-700">D√©couvertes : ${discoveries.length}</span>
                            </div>
                            <div class="flex flex-wrap gap-2">
                                ${discoveries.map(discovery => `
                                    <span class="px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full border border-green-200">
                                        ${discovery}
                                    </span>
                                `).join('')}
                            </div>
                        </div>
                    ` : ''}
                </div>
            `;
        }

        // D√©marrage de l'application
        document.addEventListener('DOMContentLoaded', function() {
            render();
        });
    </script>
</body>
</html>
